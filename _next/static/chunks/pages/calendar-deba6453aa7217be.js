(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{1836:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/calendar",function(){return n(9546)}])},9546:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return k}});var a=n(5893),o=n(1664),s=n.n(o),i=n(7294),l=n(2688),r=n(8582),c=n(8583),d=n(5371),_=n(3376),h=n(3377);let u=()=>{let t=new Date,e={day:t.getDate(),month:t.getMonth(),year:t.getFullYear()},[n]=(0,c.KO)(d.L),[a,o]=(0,i.useState)(!1),[s,l]=(0,i.useState)([]),[r,u]=(0,i.useState)(null),[f,m]=(0,i.useState)(null),[p,S]=(0,i.useState)([]),[y,B]=(0,i.useState)([]),v=[];for(let t=10;t<=19;t++)v.push("".concat(t,":00")),19!==t&&v.push("".concat(t,":30"));let x=[];for(let t=11;t<=23;t++)x.push("".concat(t,":00")),19!==t&&x.push("".concat(t,":30"));let j=t=>null===t||""===t,b=()=>n?!(j(r)||j(f))||(console.error("Start time or end time is missing!"),!1):(console.error("User is missing or null"),!1),g=async t=>{n&&(j(r)||j(f)||await _.x.shift.post({body:{id:n.id,date:t.toString(),starttime:r,endtime:f}}))},N=async()=>{if(b()){for(let t of s)await g(t);l([])}},C=(0,i.useCallback)(async()=>{if(!n){console.error("User is null or undefined.");return}let t=await _.x.shift2.$post({body:{id:n.id}}).catch(h.F),e=null==t?void 0:t.map(t=>t.date);Array.isArray(e)&&e.every(t=>"string"==typeof t)&&S(e)},[n,S]),D=(0,i.useCallback)(async()=>{if(!n){console.error("User is null or undefined.");return}let t=await _.x.shift3.$post({body:{id:n.id}}).catch(h.F),e=null==t?void 0:t.map(t=>t.date);console.log(e),Array.isArray(e)&&e.every(t=>"string"==typeof t)&&B(e)},[n,B]),k=async()=>{n&&"string"==typeof n.id?await _.x.shift._shiftId(n.id).delete():console.error("User or user ID is undefined or not a string")};return{MONTHS:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],DAYS_OF_WEEK:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],now:t,today:e,showShiftBar:a,setShowShiftBar:o,selectedDays:s,setSelectedStartTime:u,setSelectedEndTime:m,pendingShifts:p,shifts:y,handleDayClick:t=>{l(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},startTimeSlots:v,endTimeSlots:x,clearSelectedDays:()=>{l([])},createShift:N,fetchShift:C,fetchFixedShift:D,handleDeleteShift:k}};var f=n(9750),m=n.n(f);let p=t=>{let{clearSelectedDays:e}=t;return(0,a.jsx)("div",{className:m().clearButtonContainer,children:(0,a.jsx)("button",{className:m().clearButton,onClick:e,children:"選択をクリア"})})},S=t=>{let{selectedMonth:e,selectedDays:n}=t,{MONTHS:o}=u();return(0,a.jsxs)("div",{className:m().selectedDaysSection,children:["選択された日： ",n.map(t=>"".concat(o[e]," ").concat(t,"日")).join(", ")]})},y=t=>{let{setShowShiftBar:e}=t;return(0,a.jsx)("button",{className:m().addButton,onClick:()=>e(!0),children:"＋シフトを追加"})},B=t=>{let{onClose:e}=t;return(0,a.jsx)("div",{className:m().closeButtonContainer,children:(0,a.jsx)("button",{className:m().clearButton,onClick:e,children:"閉じる"})})},v=t=>{let{label:e,id:n,options:o,onChange:s}=t;return(0,a.jsx)("div",{className:m().timespace,children:(0,a.jsx)(l.Z,{id:n,options:o,sx:{width:300},renderInput:t=>(0,a.jsx)(r.Z,{...t,label:e}),onChange:(t,e)=>s(e)})})},x=t=>{let{onCreateShift:e,onDeleteShift:n}=t;return(0,a.jsxs)("div",{className:m().timespace,children:[(0,a.jsx)("button",{className:m().shiftsubmitbutton,onClick:e,children:"シフトを送る"}),(0,a.jsx)("button",{className:m().deleteShiftButton,onClick:n,children:"シフトを消す"})]})},j=t=>{let{selectedMonth:e,selectedYear:n,onNavigate:o}=t,{MONTHS:s}=u();return(0,a.jsxs)("div",{className:m().monthNavigation,children:[(0,a.jsx)("button",{className:m().navButton,onClick:()=>o(-1),children:"＜"}),(0,a.jsxs)("span",{children:[s[e]," ",n]}),(0,a.jsx)("button",{className:m().navButton,onClick:()=>o(1),children:"＞"})]})},b=t=>{let{day:e}=t;return(0,a.jsx)("div",{className:"".concat(m().calendarDay," ").concat(m().dayLabel),children:e})},g=t=>{let{day:e,className:n,onClick:o}=t;return(0,a.jsx)("div",{className:n,onClick:()=>{null!==e&&o(e)},children:e})};var N=n(1733),C=n(8417),D=n.n(C),k=()=>{let{DAYS_OF_WEEK:t,now:e,today:n,showShiftBar:o,setShowShiftBar:l,selectedDays:r,setSelectedStartTime:c,setSelectedEndTime:d,pendingShifts:_,shifts:h,handleDayClick:f,startTimeSlots:m,endTimeSlots:C,clearSelectedDays:k,createShift:I,fetchShift:w,fetchFixedShift:E,handleDeleteShift:O}=u(),[T,F]=(0,i.useState)(e.getMonth()),[L,V]=(0,i.useState)(e.getFullYear()),[M,U]=(0,i.useState)([]),[W,G]=(0,i.useState)({});(0,i.useEffect)(()=>{let t=new Date(L,T+1,0).getDate(),e=new Date(L,T,1).getDay(),n=[];for(let t=0;t<e;t++)n.push(null);for(let e=1;e<=t;e++)n.push(e);U(n)},[T,L]),(0,i.useEffect)(()=>{fetch("https://holidays-jp.github.io/api/v1/date.json").then(t=>t.json()).then(t=>{G(t)}).catch(t=>{console.error("Failed to fetch holidays:",t)})},[]),(0,i.useEffect)(()=>{w(),E();let t=setInterval(w,100),e=setInterval(E,100);return()=>{clearInterval(t),clearInterval(e)}},[w,E]);let Z=t=>null===t?"":"".concat(L,"-").concat((T+1).toString().padStart(2,"0"),"-").concat(t.toString().padStart(2,"0")),A=(t,e)=>{let a=Z(t),o=W[a],s=null!==t&&_.includes(t.toString()),i=null!==t&&h.includes(null==t?void 0:t.toString());return"".concat(D().calendarDay," \n      ").concat(t===n.day&&T===n.month&&L===n.year?D().today:""," \n      ").concat(e%7==0||o?D().sunday:""," \n      ").concat(e%7==6?D().saturday:""," \n      ").concat(null!==t&&r.includes(t)?D().selectedDay:""," \n      ").concat(s?D().pendingShiftDay:"","\n      ").concat(i?D().fixedShiftDay:"")};return(0,a.jsxs)("div",{className:D().container,children:[(0,a.jsxs)("header",{className:D().header,children:[(0,a.jsx)("div",{className:D().logoContainer,children:(0,a.jsx)("h1",{className:D().logo,children:"シフトボード"})}),(0,a.jsxs)("nav",{className:D().nav,children:[(0,a.jsx)(s(),{href:N.V.$url(),className:D().navItem,children:"ホーム"}),(0,a.jsx)(s(),{href:N.V.fixedcalendar.$url(),className:D().navItem,children:"カレンダー"})]})]}),(0,a.jsxs)("div",{className:D().calendarSection,children:[(0,a.jsx)(j,{selectedMonth:T,selectedYear:L,onNavigate:t=>{let e=T+t,n=L;e>11?(e=0,n++):e<0&&(e=11,n--),F(e),V(n)}}),(0,a.jsxs)("div",{className:D().calendarGrid,children:[t.map(t=>(0,a.jsx)(b,{day:t},t)),M.map((t,e)=>(0,a.jsx)(g,{day:t,className:A(t,e),onClick:f},e))]})]}),(0,a.jsxs)("div",{className:D().shiftInputSection,children:[(0,a.jsx)(p,{clearSelectedDays:k}),(0,a.jsx)(S,{selectedMonth:T,selectedDays:r}),(0,a.jsx)(y,{setShowShiftBar:l}),(0,a.jsxs)("div",{className:"".concat(D().shiftBar," ").concat(o?D().shiftBarVisible:""),children:[(0,a.jsx)(B,{onClose:()=>l(!1)}),(0,a.jsxs)("div",{className:"autocompleteContainer",children:[(0,a.jsx)(v,{label:"バイト開始時間",id:"startTime-demo",options:m,onChange:c}),(0,a.jsx)(v,{label:"バイト終了時間",id:"endTime-demo",options:C,onChange:d}),(0,a.jsx)(x,{onCreateShift:I,onDeleteShift:O})]})]})]})]})}},9750:function(t){t.exports={clearButtonContainer:"shiftcomponents_clearButtonContainer__ECrlI",clearButton:"shiftcomponents_clearButton___8Z4S",selectedDaysSection:"shiftcomponents_selectedDaysSection__yhF56",addButton:"shiftcomponents_addButton__fh7Vc",closeButtonContainer:"shiftcomponents_closeButtonContainer__LvZlH",timespace:"shiftcomponents_timespace__T7_sK",shiftsubmitbutton:"shiftcomponents_shiftsubmitbutton__dKqmo",deleteShiftButton:"shiftcomponents_deleteShiftButton__nl2Jt",monthNavigation:"shiftcomponents_monthNavigation___uN0r",navButton:"shiftcomponents_navButton__Xh_I6",calendarDay:"shiftcomponents_calendarDay__qLp0G",dayLabel:"shiftcomponents_dayLabel__MwLE_",logoContainer:"shiftcomponents_logoContainer__OKkJ_",logo:"shiftcomponents_logo__e7T9n",nav:"shiftcomponents_nav__3AOnq",navItem:"shiftcomponents_navItem__ZuEy1",viewOptions:"shiftcomponents_viewOptions__WcyE_",viewButton:"shiftcomponents_viewButton__1LdBU",header:"shiftcomponents_header__qbxjR",holiday:"shiftcomponents_holiday__FbfgS",employeeName:"shiftcomponents_employeeName__LC0kM",redText:"shiftcomponents_redText__8bkvY",clickableRedText:"shiftcomponents_clickableRedText__mdhWc"}},8417:function(t){t.exports={container:"ShiftBoard_container__8_m0V",calendarSection:"ShiftBoard_calendarSection__d45s4",shiftInputSection:"ShiftBoard_shiftInputSection__nvcZn",inputGroup:"ShiftBoard_inputGroup__S6brJ",submitButton:"ShiftBoard_submitButton__LI_sn",calendarGrid:"ShiftBoard_calendarGrid__fCQk3",calendarDay:"ShiftBoard_calendarDay__Wezft",daysOfWeek:"ShiftBoard_daysOfWeek__JBKFS",today:"ShiftBoard_today__bjcPE",pendingShiftDay:"ShiftBoard_pendingShiftDay__yqpVD",selectedDay:"ShiftBoard_selectedDay__zn_oj",fixedShiftDay:"ShiftBoard_fixedShiftDay__Upd_y",sunday:"ShiftBoard_sunday__OiIyE",saturday:"ShiftBoard_saturday__vmI6a",holiday:"ShiftBoard_holiday__Jd_8R",shiftBar:"ShiftBoard_shiftBar__V2gx5",shiftBarVisible:"ShiftBoard_shiftBarVisible__7QO9W",clearButton:"ShiftBoard_clearButton__blBXu",autocompleteContainer:"ShiftBoard_autocompleteContainer__gSvJ0",timespace:"ShiftBoard_timespace___4eNC","save-to-database-btn":"ShiftBoard_save-to-database-btn__kS6Fs",header:"ShiftBoard_header__ZVyiv",logoContainer:"ShiftBoard_logoContainer__3glI_",logo:"ShiftBoard_logo__GjUiN",nav:"ShiftBoard_nav__prxU1",navItem:"ShiftBoard_navItem__M8a6h"}}},function(t){t.O(0,[664,470,774,888,179],function(){return t(t.s=1836)}),_N_E=t.O()}]);