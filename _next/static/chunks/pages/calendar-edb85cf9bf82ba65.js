(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{1836:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/calendar",function(){return a(9546)}])},9546:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return k}});var n=a(5893),s=a(1664),o=a.n(s),i=a(7294),r=a(2688),l=a(8582),c=a(8583),d=a(5371),h=a(3376),u=a(3377);let _=()=>{let t=new Date,e={day:t.getDate(),month:t.getMonth(),year:t.getFullYear()},[a]=(0,c.KO)(d.L),[n,s]=(0,i.useState)(!1),[o,r]=(0,i.useState)([]),[l,_]=(0,i.useState)(null),[f,m]=(0,i.useState)(null),[S,p]=(0,i.useState)([]),[y,B]=(0,i.useState)([]),x=[];for(let t=10;t<=19;t++)x.push("".concat(t,":00")),19!==t&&x.push("".concat(t,":30"));let v=[];for(let t=11;t<=23;t++)v.push("".concat(t,":00")),19!==t&&v.push("".concat(t,":30"));let j=async()=>{if(console.log(l),console.log("aaaa"),!a){console.error("User is missing or null");return}if(null===l||""===l||null===f||""===f){console.error("Start time or end time is missing!");return}for(let t of o)await h.x.shift.post({body:{id:a.id,date:t.toString(),starttime:l,endtime:f}});r([])},g=(0,i.useCallback)(async()=>{if(!a){console.error("User is null or undefined.");return}let t=await h.x.shift2.$post({body:{id:a.id}}).catch(u.F),e=null==t?void 0:t.map(t=>t.date);Array.isArray(e)&&e.every(t=>"string"==typeof t)&&p(e)},[a,p]),N=(0,i.useCallback)(async()=>{if(!a){console.error("User is null or undefined.");return}let t=await h.x.shift3.$post({body:{id:a.id}}).catch(u.F),e=null==t?void 0:t.map(t=>t.date);console.log(e),Array.isArray(e)&&e.every(t=>"string"==typeof t)&&B(e)},[a,B]),b=async()=>{a&&"string"==typeof a.id?await h.x.shift._shiftId(a.id).delete():console.error("User or user ID is undefined or not a string")};return{MONTHS:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],DAYS_OF_WEEK:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],now:t,today:e,showShiftBar:n,setShowShiftBar:s,selectedDays:o,setSelectedStartTime:_,setSelectedEndTime:m,pendingShifts:S,shifts:y,handleDayClick:t=>{r(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},startTimeSlots:x,endTimeSlots:v,clearSelectedDays:()=>{r([])},createShift:j,fetchShift:g,fetchFixedShift:N,handleDeleteShift:b}};var f=a(9750),m=a.n(f);let S=t=>{let{clearSelectedDays:e}=t;return(0,n.jsx)("div",{className:m().clearButtonContainer,children:(0,n.jsx)("button",{className:m().clearButton,onClick:e,children:"選択をクリア"})})},p=t=>{let{selectedMonth:e,selectedDays:a}=t,{MONTHS:s}=_();return(0,n.jsxs)("div",{className:m().selectedDaysSection,children:["選択された日： ",a.map(t=>"".concat(s[e]," ").concat(t,"日")).join(", ")]})},y=t=>{let{setShowShiftBar:e}=t;return(0,n.jsx)("button",{className:m().addButton,onClick:()=>e(!0),children:"＋シフトを追加"})},B=t=>{let{onClose:e}=t;return(0,n.jsx)("div",{className:m().closeButtonContainer,children:(0,n.jsx)("button",{className:m().clearButton,onClick:e,children:"閉じる"})})},x=t=>{let{label:e,id:a,options:s,onChange:o}=t;return(0,n.jsx)("div",{className:m().timespace,children:(0,n.jsx)(r.Z,{id:a,options:s,sx:{width:300},renderInput:t=>(0,n.jsx)(l.Z,{...t,label:e}),onChange:(t,e)=>o(e)})})},v=t=>{let{onCreateShift:e,onDeleteShift:a}=t;return(0,n.jsxs)("div",{className:m().timespace,children:[(0,n.jsx)("button",{className:m().shiftsubmitbutton,onClick:e,children:"シフトを送る"}),(0,n.jsx)("button",{className:m().deleteShiftButton,onClick:a,children:"シフトを消す"})]})},j=t=>{let{selectedMonth:e,selectedYear:a,onNavigate:s}=t,{MONTHS:o}=_();return(0,n.jsxs)("div",{className:m().monthNavigation,children:[(0,n.jsx)("button",{className:m().navButton,onClick:()=>s(-1),children:"＜"}),(0,n.jsxs)("span",{children:[o[e]," ",a]}),(0,n.jsx)("button",{className:m().navButton,onClick:()=>s(1),children:"＞"})]})},g=t=>{let{day:e}=t;return(0,n.jsx)("div",{className:"".concat(m().calendarDay," ").concat(m().dayLabel),children:e})},N=t=>{let{day:e,className:a,onClick:s}=t;return(0,n.jsx)("div",{className:a,onClick:()=>{null!==e&&s(e)},children:e})};var b=a(1733),C=a(8417),D=a.n(C),k=()=>{let{DAYS_OF_WEEK:t,now:e,today:a,showShiftBar:s,setShowShiftBar:r,selectedDays:l,setSelectedStartTime:c,setSelectedEndTime:d,pendingShifts:h,shifts:u,handleDayClick:f,startTimeSlots:m,endTimeSlots:C,clearSelectedDays:k,createShift:I,fetchShift:w,fetchFixedShift:E,handleDeleteShift:F}=_(),[V,O]=(0,i.useState)(e.getMonth()),[L,M]=(0,i.useState)(e.getFullYear()),[T,G]=(0,i.useState)([]),[U,W]=(0,i.useState)({});(0,i.useEffect)(()=>{let t=new Date(L,V+1,0).getDate(),e=new Date(L,V,1).getDay(),a=[];for(let t=0;t<e;t++)a.push(null);for(let e=1;e<=t;e++)a.push(e);G(a)},[V,L]),(0,i.useEffect)(()=>{fetch("https://holidays-jp.github.io/api/v1/date.json").then(t=>t.json()).then(t=>{W(t)}).catch(t=>{console.error("Failed to fetch holidays:",t)})},[]),(0,i.useEffect)(()=>{w(),E();let t=setInterval(w,100),e=setInterval(E,100);return()=>{clearInterval(t),clearInterval(e)}},[w,E]);let Z=t=>null===t?"":"".concat(L,"-").concat((V+1).toString().padStart(2,"0"),"-").concat(t.toString().padStart(2,"0")),A=(t,e)=>{let n=Z(t),s=U[n],o=null!==t&&h.includes(t.toString()),i=null!==t&&u.includes(null==t?void 0:t.toString());return"".concat(D().calendarDay," \n      ").concat(t===a.day&&V===a.month&&L===a.year?D().today:""," \n      ").concat(e%7==0||s?D().sunday:""," \n      ").concat(e%7==6?D().saturday:""," \n      ").concat(null!==t&&l.includes(t)?D().selectedDay:""," \n      ").concat(o?D().pendingShiftDay:"","\n      ").concat(i?D().fixedShiftDay:"")};return(0,n.jsxs)("div",{className:D().container,children:[(0,n.jsxs)("header",{className:D().header,children:[(0,n.jsx)("div",{className:D().logoContainer,children:(0,n.jsx)("h1",{className:D().logo,children:"シフトボード"})}),(0,n.jsxs)("nav",{className:D().nav,children:[(0,n.jsx)(o(),{href:b.V.$url(),className:D().navItem,children:"ホーム"}),(0,n.jsx)(o(),{href:b.V.fixedcalendar.$url(),className:D().navItem,children:"カレンダー"})]})]}),(0,n.jsxs)("div",{className:D().calendarSection,children:[(0,n.jsx)(j,{selectedMonth:V,selectedYear:L,onNavigate:t=>{let e=V+t,a=L;e>11?(e=0,a++):e<0&&(e=11,a--),O(e),M(a)}}),(0,n.jsxs)("div",{className:D().calendarGrid,children:[t.map(t=>(0,n.jsx)(g,{day:t},t)),T.map((t,e)=>(0,n.jsx)(N,{day:t,className:A(t,e),onClick:f},e))]})]}),(0,n.jsxs)("div",{className:D().shiftInputSection,children:[(0,n.jsx)(S,{clearSelectedDays:k}),(0,n.jsx)(p,{selectedMonth:V,selectedDays:l}),(0,n.jsx)(y,{setShowShiftBar:r}),(0,n.jsxs)("div",{className:"".concat(D().shiftBar," ").concat(s?D().shiftBarVisible:""),children:[(0,n.jsx)(B,{onClose:()=>r(!1)}),(0,n.jsxs)("div",{className:"autocompleteContainer",children:[(0,n.jsx)(x,{label:"バイト開始時間",id:"startTime-demo",options:m,onChange:c}),(0,n.jsx)(x,{label:"バイト終了時間",id:"endTime-demo",options:C,onChange:d}),(0,n.jsx)(v,{onCreateShift:I,onDeleteShift:F})]})]})]})]})}},9750:function(t){t.exports={clearButtonContainer:"shiftcomponents_clearButtonContainer__ECrlI",clearButton:"shiftcomponents_clearButton___8Z4S",selectedDaysSection:"shiftcomponents_selectedDaysSection__yhF56",addButton:"shiftcomponents_addButton__fh7Vc",closeButtonContainer:"shiftcomponents_closeButtonContainer__LvZlH",timespace:"shiftcomponents_timespace__T7_sK",shiftsubmitbutton:"shiftcomponents_shiftsubmitbutton__dKqmo",deleteShiftButton:"shiftcomponents_deleteShiftButton__nl2Jt",monthNavigation:"shiftcomponents_monthNavigation___uN0r",navButton:"shiftcomponents_navButton__Xh_I6",calendarDay:"shiftcomponents_calendarDay__qLp0G",dayLabel:"shiftcomponents_dayLabel__MwLE_"}},8417:function(t){t.exports={container:"ShiftBoard_container__8_m0V",calendarSection:"ShiftBoard_calendarSection__d45s4",shiftInputSection:"ShiftBoard_shiftInputSection__nvcZn",inputGroup:"ShiftBoard_inputGroup__S6brJ",submitButton:"ShiftBoard_submitButton__LI_sn",calendarGrid:"ShiftBoard_calendarGrid__fCQk3",calendarDay:"ShiftBoard_calendarDay__Wezft",daysOfWeek:"ShiftBoard_daysOfWeek__JBKFS",today:"ShiftBoard_today__bjcPE",pendingShiftDay:"ShiftBoard_pendingShiftDay__yqpVD",selectedDay:"ShiftBoard_selectedDay__zn_oj",fixedShiftDay:"ShiftBoard_fixedShiftDay__Upd_y",sunday:"ShiftBoard_sunday__OiIyE",saturday:"ShiftBoard_saturday__vmI6a",holiday:"ShiftBoard_holiday__Jd_8R",shiftBar:"ShiftBoard_shiftBar__V2gx5",shiftBarVisible:"ShiftBoard_shiftBarVisible__7QO9W",clearButton:"ShiftBoard_clearButton__blBXu",autocompleteContainer:"ShiftBoard_autocompleteContainer__gSvJ0",timespace:"ShiftBoard_timespace___4eNC","save-to-database-btn":"ShiftBoard_save-to-database-btn__kS6Fs",header:"ShiftBoard_header__ZVyiv",logoContainer:"ShiftBoard_logoContainer__3glI_",logo:"ShiftBoard_logo__GjUiN",nav:"ShiftBoard_nav__prxU1",navItem:"ShiftBoard_navItem__M8a6h"}}},function(t){t.O(0,[664,470,774,888,179],function(){return t(t.s=1836)}),_N_E=t.O()}]);