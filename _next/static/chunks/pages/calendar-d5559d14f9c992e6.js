(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{1836:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/calendar",function(){return a(6984)}])},6984:function(t,e,a){"use strict";a.r(e);var n=a(5893),i=a(8582),o=a(2688),s=a(8583),r=a(7294),c=a(5371),l=a(3376),d=a(3377),u=a(8417),_=a.n(u);let h=["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],f=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];e.default=()=>{let t=new Date,e={day:t.getDate(),month:t.getMonth(),year:t.getFullYear()},[a]=(0,s.KO)(c.L),[u,S]=(0,r.useState)(t.getMonth()),[B,m]=(0,r.useState)(t.getFullYear()),[p,y]=(0,r.useState)([]),[b,j]=(0,r.useState)({}),[v,x]=(0,r.useState)(!1),[g,N]=(0,r.useState)([]),[C,D]=(0,r.useState)(null),[k,w]=(0,r.useState)(null),[I,F]=(0,r.useState)([]);(0,r.useEffect)(()=>{let t=new Date(B,u+1,0).getDate(),e=new Date(B,u,1).getDay(),a=[];for(let t=0;t<e;t++)a.push(null);for(let e=1;e<=t;e++)a.push(e);y(a)},[u,B]),(0,r.useEffect)(()=>{fetch("https://holidays-jp.github.io/api/v1/date.json").then(t=>t.json()).then(t=>{j(t)}).catch(t=>{console.error("Failed to fetch holidays:",t)})},[]);let E=t=>{let e=u+t,a=B;e>11?(e=0,a++):e<0&&(e=11,a--),S(e),m(a)},O=t=>{N(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},V=[];for(let t=10;t<=19;t++)V.push("".concat(t,":00")),19!==t&&V.push("".concat(t,":30"));let W=[];for(let t=11;t<=23;t++)W.push("".concat(t,":00")),19!==t&&W.push("".concat(t,":30"));let Z=async()=>{if(!a){console.error("User is missing or null");return}if(null===C||""===C||null===k||""===k){console.error("Start time or end time is missing!");return}for(let t of(console.log("aaa"),g))await l.x.shift.post({body:{id:a.id,date:t.toString(),starttime:C,endtime:k}});N([])},G=(0,r.useCallback)(async()=>{if(!a){console.error("User is null or undefined.");return}console.log(a.id);let t=await l.x.shift2.$post({body:{id:a.id}}).catch(d.F),e=null==t?void 0:t.map(t=>t.date);console.log(e),Array.isArray(e)&&e.every(t=>"string"==typeof t)&&F(e)},[a,F]);(0,r.useEffect)(()=>{G();let t=setInterval(G,100);return()=>clearInterval(t)},[G]);let J=async()=>{a&&"string"==typeof a.id?await l.x.shift._shiftId(a.id).delete():console.error("User or user ID is undefined or not a string")};return(0,n.jsxs)("div",{className:_().container,children:[(0,n.jsxs)("div",{className:_().calendarSection,children:[(0,n.jsxs)("div",{className:_().monthNavigation,children:[(0,n.jsx)("button",{className:_().navButton,onClick:()=>E(-1),children:"＜"}),(0,n.jsxs)("span",{children:[h[u]," ",B]}),(0,n.jsx)("button",{className:_().navButton,onClick:()=>E(1),children:"＞"})]}),(0,n.jsxs)("div",{className:_().calendarGrid,children:[f.map(t=>(0,n.jsx)("div",{className:"".concat(_().calendarDay," ").concat(_().dayLabel),children:t},t)),p.map((t,a)=>{let i="";null!==t&&(i="".concat(B,"-").concat((u+1).toString().padStart(2,"0"),"-").concat(t.toString().padStart(2,"0")));let o=b[i],s=null!==t&&I.includes(t.toString());return(0,n.jsx)("div",{className:"".concat(_().calendarDay," \n                ").concat(t===e.day&&u===e.month&&B===e.year?_().today:""," \n                ").concat(a%7==0||o?_().sunday:""," \n                ").concat(a%7==6?_().saturday:""," \n                ").concat(null!==t&&g.includes(t)?_().selectedDay:""," \n                ").concat(s?_().pendingShiftDay:"","\n                "),onClick:()=>{null!==t&&O(t)},children:t},a)})]})]}),(0,n.jsxs)("div",{className:_().shiftInputSection,children:[(0,n.jsx)("div",{className:_().clearButtonContainer,children:(0,n.jsx)("button",{className:_().clearButton,onClick:()=>{N([])},children:"選択をクリア"})}),(0,n.jsxs)("div",{className:_().selectedDaysSection,children:["選択された日： ",g.map(t=>"".concat(h[u]," ").concat(t,"日")).join(", ")]}),(0,n.jsx)("button",{className:_().addButton,onClick:()=>x(!0),children:"＋シフトを追加"}),(0,n.jsxs)("div",{className:"".concat(_().shiftBar," ").concat(v?_().shiftBarVisible:""),children:[(0,n.jsx)("div",{className:_().closeButtonContainer,children:(0,n.jsx)("button",{onClick:()=>x(!1),children:"閉じる"})}),(0,n.jsxs)("div",{className:"autocompleteContainer",children:[(0,n.jsx)("div",{className:_().timespace,children:(0,n.jsx)(o.Z,{id:"disabled-options-demo",options:V,sx:{width:300},renderInput:t=>(0,n.jsx)(i.Z,{...t,label:"バイト開始時間"}),onChange:(t,e)=>D(e)})}),(0,n.jsx)("div",{className:_().timespace,children:(0,n.jsx)(o.Z,{id:"disabled-options-demo",options:W,sx:{width:300},renderInput:t=>(0,n.jsx)(i.Z,{...t,label:"バイト終了時間"}),onChange:(t,e)=>w(e)})}),(0,n.jsxs)("div",{className:_().timespace,children:[(0,n.jsx)("button",{className:_().shiftsubmitnutton,onClick:Z,children:"シフトを送る"}),(0,n.jsx)("button",{className:_().deleteShiftButton,onClick:J,children:"シフトを消す"})]})]})]})]})]})}},8417:function(t){t.exports={container:"ShiftBoard_container__8_m0V",calendarSection:"ShiftBoard_calendarSection__d45s4",monthNavigation:"ShiftBoard_monthNavigation__5FDy7",navButton:"ShiftBoard_navButton__aFFIE",shiftInputSection:"ShiftBoard_shiftInputSection__nvcZn",inputGroup:"ShiftBoard_inputGroup__S6brJ",submitButton:"ShiftBoard_submitButton__LI_sn",calendarGrid:"ShiftBoard_calendarGrid__fCQk3",calendarDay:"ShiftBoard_calendarDay__Wezft",daysOfWeek:"ShiftBoard_daysOfWeek__JBKFS",dayLabel:"ShiftBoard_dayLabel__ONjXj",today:"ShiftBoard_today__bjcPE",pendingShiftDay:"ShiftBoard_pendingShiftDay__yqpVD",selectedDay:"ShiftBoard_selectedDay__zn_oj",sunday:"ShiftBoard_sunday__OiIyE",saturday:"ShiftBoard_saturday__vmI6a",holiday:"ShiftBoard_holiday__Jd_8R",shiftBar:"ShiftBoard_shiftBar__V2gx5",shiftBarVisible:"ShiftBoard_shiftBarVisible__7QO9W",addButton:"ShiftBoard_addButton__FVo_6",selectedDaysSection:"ShiftBoard_selectedDaysSection__ok4FC",clearButtonContainer:"ShiftBoard_clearButtonContainer__hWZ_v",clearButton:"ShiftBoard_clearButton__blBXu",autocompleteContainer:"ShiftBoard_autocompleteContainer__gSvJ0",closeButtonContainer:"ShiftBoard_closeButtonContainer__V_g5m",timespace:"ShiftBoard_timespace___4eNC","save-to-database-btn":"ShiftBoard_save-to-database-btn__kS6Fs",shiftsubmitnutton:"ShiftBoard_shiftsubmitnutton__d_s_b",shiftsubmitButton:"ShiftBoard_shiftsubmitButton__A57_f",deleteShiftButton:"ShiftBoard_deleteShiftButton__Rc_JX"}}},function(t){t.O(0,[470,774,888,179],function(){return t(t.s=1836)}),_N_E=t.O()}]);