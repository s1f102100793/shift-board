(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[678],{1897:function(e,t,l){(window.__NEXT_P=window.__NEXT_P||[]).push(["/employee",function(){return l(7132)}])},7132:function(e,t,l){"use strict";l.r(t);var a=l(5893),n=l(7294),s=l(3376),o=l(3377),i=l(1374),r=l.n(i);t.default=()=>{let e=new Date,t=new Date(e.getFullYear(),e.getMonth()+1,0).getDate(),l=Array.from({length:t},(e,t)=>t+1),i=["日","月","火","水","木","金","土"],[d,c]=(0,n.useState)({}),[m,h]=(0,n.useState)(!1),[u,_]=(0,n.useState)(null),[p,y]=(0,n.useState)(null),[f,g]=(0,n.useState)(null),j=e=>{_(e),h(!0)},[x,N]=(0,n.useState)([]),[T,E]=(0,n.useState)([]),k=async()=>{let e=await s.x.shift.$get().catch(o.F);if(console.log(e),null!=e){N(e);let t=[...new Set(e.map(e=>e.id))];E(t)}};return(0,n.useEffect)(()=>{k()},[]),(0,n.useEffect)(()=>{fetch("https://holidays-jp.github.io/api/v1/date.json").then(e=>e.json()).then(e=>{c(e)}).catch(e=>{console.error("Failed to fetch holidays:",e)})},[]),(0,a.jsxs)("div",{className:r().container,children:[(0,a.jsxs)("table",{className:r().table,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"".concat(e.getFullYear(),"年 ").concat(e.getMonth()+1,"月")}),l.map(t=>{let l=new Date(e.getFullYear(),e.getMonth(),t),n=l.getDay(),s="".concat(l.getFullYear(),"-").concat((l.getMonth()+1).toString().padStart(2,"0"),"-").concat(t.toString().padStart(2,"0")),o=!!d[s];return(0,a.jsxs)("th",{className:o||6===n||0===n?r().holiday:"",onClick:()=>j(t.toString()),children:[t," (",i[n],")"]},t)})]})}),(0,a.jsx)("tbody",{children:T.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:r().employeeName,children:e}),l.map(t=>{let l=x.find(l=>l.id===e&&l.date===t.toString());return(0,a.jsx)("td",{children:l?"".concat(l.starttime," - ").concat(l.endtime):""},t)})]},e))})]}),m&&(0,a.jsx)("div",{className:r().modalOverlay,children:(0,a.jsxs)("div",{className:r().modal,children:[(0,a.jsx)("button",{onClick:()=>{h(!1)},children:"閉じる"}),null!==u&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h2",{children:[u,"日(",i[new Date(e.getFullYear(),e.getMonth(),Number(u)).getDay()],")のシフト詳細"]}),(0,a.jsxs)("table",{className:r().timeTable,children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"名前"}),Array.from({length:30},(e,t)=>10+.5*t).map(e=>(0,a.jsxs)("th",{children:[Math.floor(e),":",e%1==0?"00":"30"]},e))]})}),(0,a.jsx)("tbody",{children:T.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:e}),Array.from({length:30},(e,t)=>10+.5*t).map(t=>{let l=Math.floor(t),n=t%1==0?0:30,s=x.find(t=>t.id===e&&t.date===u),[o,i]=(null==s?void 0:s.starttime.split(":").map(Number))||[0,0],[d,c]=(null==s?void 0:s.endtime.split(":").map(Number))||[0,0],m=(o<l||o===l&&i<=n)&&(d>l||d===l&&c>n);return(0,a.jsx)("td",{className:m?r().shiftTime:r().timeCell,onMouseDown:()=>{m&&y({employeeId:e,startHour:t.toString()})},onMouseEnter:()=>{p&&p.employeeId===e&&y(e=>e?{employeeId:e.employeeId,startHour:e.startHour,endHour:t.toString()}:null)},onMouseUp:()=>{p&&y(null)},children:p&&p.employeeId===e&&parseInt(p.startHour,10)<=t&&("string"!=typeof p.endHour||parseInt(p.endHour,10)>t)?(0,a.jsx)("div",{className:r().editingTimeIndicator}):null},t)})]},e))})]})]})]})})]})}},1374:function(e){e.exports={container:"EmployeeTask_container__v_sj_",table:"EmployeeTask_table__1JDcJ",holiday:"EmployeeTask_holiday__V6nvt",employeeName:"EmployeeTask_employeeName__oip2U",modalOverlay:"EmployeeTask_modalOverlay__cgzmE",modal:"EmployeeTask_modal__Gyle0",shiftBar:"EmployeeTask_shiftBar__pzGlG",timeTable:"EmployeeTask_timeTable__hRt4i",timeCell:"EmployeeTask_timeCell__eJIjd",shiftTime:"EmployeeTask_shiftTime__NkD_N",editingTimeIndicator:"EmployeeTask_editingTimeIndicator__5crLm"}}},function(e){e.O(0,[774,888,179],function(){return e(e.s=1897)}),_N_E=e.O()}]);