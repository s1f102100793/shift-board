(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[844],{1836:function(t,e,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/calendar",function(){return a(1939)}])},1939:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return B}});var n=a(5893),i=a(8582),o=a(2688),s=a(1664),r=a.n(s),l=a(7294),d=a(8583),c=a(5371),h=a(3376),u=a(3377);let _=()=>{let t=new Date,e={day:t.getDate(),month:t.getMonth(),year:t.getFullYear()},[a]=(0,d.KO)(c.L),[n,i]=(0,l.useState)(!1),[o,s]=(0,l.useState)([]),[r,_]=(0,l.useState)(null),[f,S]=(0,l.useState)(null),[m,B]=(0,l.useState)([]),[y,p]=(0,l.useState)([]),v=[];for(let t=10;t<=19;t++)v.push("".concat(t,":00")),19!==t&&v.push("".concat(t,":30"));let x=[];for(let t=11;t<=23;t++)x.push("".concat(t,":00")),19!==t&&x.push("".concat(t,":30"));let j=async()=>{if(console.log(r),console.log("aaaa"),!a){console.error("User is missing or null");return}if(null===r||""===r||null===f||""===f){console.error("Start time or end time is missing!");return}for(let t of o)await h.x.shift.post({body:{id:a.id,date:t.toString(),starttime:r,endtime:f}});s([])},b=(0,l.useCallback)(async()=>{if(!a){console.error("User is null or undefined.");return}let t=await h.x.shift2.$post({body:{id:a.id}}).catch(u.F),e=null==t?void 0:t.map(t=>t.date);Array.isArray(e)&&e.every(t=>"string"==typeof t)&&B(e)},[a,B]),g=(0,l.useCallback)(async()=>{if(!a){console.error("User is null or undefined.");return}let t=await h.x.shift3.$post({body:{id:a.id}}).catch(u.F),e=null==t?void 0:t.map(t=>t.date);console.log(e),Array.isArray(e)&&e.every(t=>"string"==typeof t)&&p(e)},[a,p]);return{MONTHS:["1月","2月","3月","4月","5月","6月","7月","8月","9月","10月","11月","12月"],DAYS_OF_WEEK:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],now:t,today:e,user:a,showShiftBar:n,setShowShiftBar:i,selectedDays:o,setSelectedStartTime:_,setSelectedEndTime:S,pendingShifts:m,shifts:y,handleDayClick:t=>{s(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},startTimeSlots:v,endTimeSlots:x,clearSelectedDays:()=>{s([])},createShift:j,fetchShift:b,fetchFixedShift:g}};var f=a(1733),S=a(8417),m=a.n(S),B=()=>{let{MONTHS:t,DAYS_OF_WEEK:e,now:a,today:s,user:d,showShiftBar:c,setShowShiftBar:u,selectedDays:S,setSelectedStartTime:B,setSelectedEndTime:y,pendingShifts:p,shifts:v,handleDayClick:x,startTimeSlots:j,endTimeSlots:b,clearSelectedDays:g,createShift:N,fetchShift:C,fetchFixedShift:D}=_(),[k,I]=(0,l.useState)(a.getMonth()),[w,F]=(0,l.useState)(a.getFullYear()),[E,V]=(0,l.useState)([]),[O,U]=(0,l.useState)({});(0,l.useEffect)(()=>{let t=new Date(w,k+1,0).getDate(),e=new Date(w,k,1).getDay(),a=[];for(let t=0;t<e;t++)a.push(null);for(let e=1;e<=t;e++)a.push(e);V(a)},[k,w]),(0,l.useEffect)(()=>{fetch("https://holidays-jp.github.io/api/v1/date.json").then(t=>t.json()).then(t=>{U(t)}).catch(t=>{console.error("Failed to fetch holidays:",t)})},[]);let W=t=>{let e=k+t,a=w;e>11?(e=0,a++):e<0&&(e=11,a--),I(e),F(a)};(0,l.useEffect)(()=>{C(),D();let t=setInterval(C,100),e=setInterval(D,100);return()=>{clearInterval(t),clearInterval(e)}},[C,D]);let Z=async()=>{d&&"string"==typeof d.id?await h.x.shift._shiftId(d.id).delete():console.error("User or user ID is undefined or not a string")};return(0,n.jsxs)("div",{className:m().container,children:[(0,n.jsxs)("header",{className:m().header,children:[(0,n.jsx)("div",{className:m().logoContainer,children:(0,n.jsx)("h1",{className:m().logo,children:"シフトボード"})}),(0,n.jsxs)("nav",{className:m().nav,children:[(0,n.jsx)(r(),{href:f.V.$url(),className:m().navItem,children:"ホーム"}),(0,n.jsx)(r(),{href:f.V.fixedcalendar.$url(),className:m().navItem,children:"カレンダー"})]})]}),(0,n.jsxs)("div",{className:m().calendarSection,children:[(0,n.jsxs)("div",{className:m().monthNavigation,children:[(0,n.jsx)("button",{className:m().navButton,onClick:()=>W(-1),children:"＜"}),(0,n.jsxs)("span",{children:[t[k]," ",w]}),(0,n.jsx)("button",{className:m().navButton,onClick:()=>W(1),children:"＞"})]}),(0,n.jsxs)("div",{className:m().calendarGrid,children:[e.map(t=>(0,n.jsx)("div",{className:"".concat(m().calendarDay," ").concat(m().dayLabel),children:t},t)),E.map((t,e)=>{let a="";null!==t&&(a="".concat(w,"-").concat((k+1).toString().padStart(2,"0"),"-").concat(t.toString().padStart(2,"0")));let i=O[a],o=null!==t&&p.includes(t.toString()),r=null!==t&&v.includes(null==t?void 0:t.toString());return(0,n.jsx)("div",{className:"".concat(m().calendarDay," \n                ").concat(t===s.day&&k===s.month&&w===s.year?m().today:""," \n                ").concat(e%7==0||i?m().sunday:""," \n                ").concat(e%7==6?m().saturday:""," \n                ").concat(null!==t&&S.includes(t)?m().selectedDay:""," \n                ").concat(o?m().pendingShiftDay:"","\n                ").concat(r?m().fixedShiftDay:""," \n                "),onClick:()=>{null!==t&&x(t)},children:t},e)})]})]}),(0,n.jsxs)("div",{className:m().shiftInputSection,children:[(0,n.jsx)("div",{className:m().clearButtonContainer,children:(0,n.jsx)("button",{className:m().clearButton,onClick:g,children:"選択をクリア"})}),(0,n.jsxs)("div",{className:m().selectedDaysSection,children:["選択された日： ",S.map(e=>"".concat(t[k]," ").concat(e,"日")).join(", ")]}),(0,n.jsx)("button",{className:m().addButton,onClick:()=>u(!0),children:"＋シフトを追加"}),(0,n.jsxs)("div",{className:"".concat(m().shiftBar," ").concat(c?m().shiftBarVisible:""),children:[(0,n.jsx)("div",{className:m().closeButtonContainer,children:(0,n.jsx)("button",{className:m().clearButton,onClick:()=>u(!1),children:"閉じる"})}),(0,n.jsxs)("div",{className:"autocompleteContainer",children:[(0,n.jsx)("div",{className:m().timespace,children:(0,n.jsx)(o.Z,{id:"disabled-options-demo",options:j,sx:{width:300},renderInput:t=>(0,n.jsx)(i.Z,{...t,label:"バイト開始時間"}),onChange:(t,e)=>B(e)})}),(0,n.jsx)("div",{className:m().timespace,children:(0,n.jsx)(o.Z,{id:"disabled-options-demo",options:b,sx:{width:300},renderInput:t=>(0,n.jsx)(i.Z,{...t,label:"バイト終了時間"}),onChange:(t,e)=>y(e)})}),(0,n.jsxs)("div",{className:m().timespace,children:[(0,n.jsx)("button",{className:m().shiftsubmitnutton,onClick:N,children:"シフトを送る"}),(0,n.jsx)("button",{className:m().deleteShiftButton,onClick:Z,children:"シフトを消す"})]})]})]})]})]})}},8417:function(t){t.exports={container:"ShiftBoard_container__8_m0V",calendarSection:"ShiftBoard_calendarSection__d45s4",monthNavigation:"ShiftBoard_monthNavigation__5FDy7",navButton:"ShiftBoard_navButton__aFFIE",shiftInputSection:"ShiftBoard_shiftInputSection__nvcZn",inputGroup:"ShiftBoard_inputGroup__S6brJ",submitButton:"ShiftBoard_submitButton__LI_sn",calendarGrid:"ShiftBoard_calendarGrid__fCQk3",calendarDay:"ShiftBoard_calendarDay__Wezft",daysOfWeek:"ShiftBoard_daysOfWeek__JBKFS",dayLabel:"ShiftBoard_dayLabel__ONjXj",today:"ShiftBoard_today__bjcPE",pendingShiftDay:"ShiftBoard_pendingShiftDay__yqpVD",selectedDay:"ShiftBoard_selectedDay__zn_oj",fixedShiftDay:"ShiftBoard_fixedShiftDay__Upd_y",sunday:"ShiftBoard_sunday__OiIyE",saturday:"ShiftBoard_saturday__vmI6a",holiday:"ShiftBoard_holiday__Jd_8R",shiftBar:"ShiftBoard_shiftBar__V2gx5",shiftBarVisible:"ShiftBoard_shiftBarVisible__7QO9W",addButton:"ShiftBoard_addButton__FVo_6",selectedDaysSection:"ShiftBoard_selectedDaysSection__ok4FC",clearButtonContainer:"ShiftBoard_clearButtonContainer__hWZ_v",clearButton:"ShiftBoard_clearButton__blBXu",autocompleteContainer:"ShiftBoard_autocompleteContainer__gSvJ0",closeButtonContainer:"ShiftBoard_closeButtonContainer__V_g5m",timespace:"ShiftBoard_timespace___4eNC","save-to-database-btn":"ShiftBoard_save-to-database-btn__kS6Fs",shiftsubmitnutton:"ShiftBoard_shiftsubmitnutton__d_s_b",shiftsubmitButton:"ShiftBoard_shiftsubmitButton__A57_f",deleteShiftButton:"ShiftBoard_deleteShiftButton__Rc_JX",header:"ShiftBoard_header__ZVyiv",logoContainer:"ShiftBoard_logoContainer__3glI_",logo:"ShiftBoard_logo__GjUiN",nav:"ShiftBoard_nav__prxU1",navItem:"ShiftBoard_navItem__M8a6h"}}},function(t){t.O(0,[664,470,774,888,179],function(){return t(t.s=1836)}),_N_E=t.O()}]);